"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(M){M.fn.circliful=function(e,b){var T=M.extend({foregroundColor:"#3498DB",backgroundColor:"#ccc",pointColor:"none",fillColor:"none",foregroundBorderWidth:15,backgroundBorderWidth:15,pointSize:28.5,fontColor:"#aaa",beforePercent:"",percent:75,animation:1,animationStep:5,icon:"none",iconSize:"30",iconColor:"#ccc",iconPosition:"top",iconDecoration:!0,target:0,showPercent:1,percentageTextSize:22,percentageX:100,percentageY:113,textAdditionalCss:"",targetPercent:0,targetTextSize:17,targetColor:"#2980B9",text:null,textStyle:null,textColor:"#666",textY:null,textX:null,percentages:[],multiPercentageLegend:0,textBelow:!1,noPercentageSign:!1,replacePercentageByText:null,halfCircle:!1,animateInView:!1,decimals:0,alwaysDecimals:!1,title:"Circle Chart",description:"",progressColor:null,strokeLinecap:"butt"},e);return this.each(function(){var i,s,d=M(this);i=T,s=d.data(),M.each(i,function(e,t){e.toLowerCase()in s&&(i[e]=s[e.toLowerCase()])});var h,u,a=T.percent,e=83,t=100,p=T.percentageY,m=T.percentageX,f=T.backgroundBorderWidth,r=T.progressColor;if(T.halfCircle?"left"===T.iconPosition?(t=80,m=117,p=e=100):T.halfCircle&&(e=80,p=100):"bottom"===T.iconPosition?(e=124,p=95):"left"===T.iconPosition?(t=80,e=110,m=117):"middle"===T.iconPosition?(0===T.percentages.length&&(T.iconDecoration&&(h='<g stroke="'+("none"!==T.backgroundColor?T.backgroundColor:"#ccc")+'" ><line x1="133" y1="50" x2="140" y2="40" stroke-width="2"  /></g>',h+='<g stroke="'+("none"!==T.backgroundColor?T.backgroundColor:"#ccc")+'" ><line x1="140" y1="40" x2="200" y2="40" stroke-width="2"  /></g>'),m=170,p=35),e=110):"right"===T.iconPosition?(t=120,e=110,m=80):"top"===T.iconPosition&&"none"!==T.icon&&(p=120),0<T.targetPercent&&!0!==T.halfCircle&&(p=95,h='<g stroke="'+("none"!==T.backgroundColor?T.backgroundColor:"#ccc")+'" ><line x1="75" y1="101" x2="125" y2="101" stroke-width="1"  /></g>',h+='<text text-anchor="middle" x="'+m+'" y="120" style="font-size: '+T.targetTextSize+'px;" fill="'+T.targetColor+'">'+T.targetPercent+(T.noPercentageSign&&null===T.replacePercentageByText?"":"%")+"</text>",h+='<circle cx="100" cy="100" r="69" fill="none" stroke="'+T.backgroundColor+'" stroke-width="3" stroke-dasharray="450" transform="rotate(-90,100,100)" />',h+='<circle cx="100" cy="100" r="69" fill="none" stroke="'+T.targetColor+'" stroke-width="3" stroke-dasharray="'+4.35*T.targetPercent+', 20000" transform="rotate(-90,100,100)" />'),null!==T.text&&(T.halfCircle?T.textBelow?h+='<text text-anchor="middle" x="'+(null!==T.textX?T.textX:"100")+'" y="'+(null!==T.textY?T.textY:"64%")+'" style="'+T.textStyle+'" fill="'+T.textColor+'">'+T.text+"</text>":h+='<text text-anchor="middle" x="'+(null!==T.textX?T.textX:"100")+'" y="'+(null!==T.textY?T.textY:"115")+'" style="'+T.textStyle+'" fill="'+T.textColor+'">'+T.text+"</text>":T.textBelow?h+='<text text-anchor="middle" x="'+(null!==T.textX?T.textX:"100")+'" y="'+(null!==T.textY?T.textY:"99%")+'" style="'+T.textStyle+'" fill="'+T.textColor+'">'+T.text+"</text>":h+='<text text-anchor="middle" x="'+(null!==T.textX?T.textX:"100")+'" y="'+(null!==T.textY?T.textY:"115")+'" style="'+T.textStyle+'" fill="'+T.textColor+'">'+T.text+"</text>"),u="none"!==T.icon?'<text text-anchor="middle" x="'+t+'" y="'+e+'" class="icon" style="font-size: '+T.iconSize+'px" fill="'+T.iconColor+'">&#x'+T.icon+"</text>":"",T.halfCircle){var n=0===T.showPercent?"display:none":"";d.addClass("svg-container").append(M('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 194 186" class="circliful">'+(void 0!==h?h:"")+'<clipPath id="cut-off-bottom"> <rect x="100" y="0" width="100" height="200" /> </clipPath><circle cx="100" cy="100" r="57" class="border" fill="'+T.fillColor+'" stroke="'+T.backgroundColor+'" stroke-width="'+f+'" stroke-dasharray="360" clip-path="url(#cut-off-bottom)" transform="rotate(-90,100,100)" /><circle class="circle" cx="100" cy="100" r="57" fill="none" stroke="'+T.foregroundColor+'" stroke-width="'+T.foregroundBorderWidth+'" stroke-dasharray="0,20000" transform="rotate(-180,100,100)" stroke-linecap="'+T.strokeLinecap+'" /><circle cx="100" cy="100" r="'+T.pointSize+'" fill="'+T.pointColor+'" clip-path="url(#cut-off-bottom)" transform="rotate(-90,100,100)" />'+u+'<text class="timer" text-anchor="middle" x="'+m+'" y="'+p+'" style="font-size: '+T.percentageTextSize+"px; ;"+T.textAdditionalCss+'" fill="'+T.fontColor+'"><tspan class="number" style="'+n+'">'+(null===T.replacePercentageByText?0:T.replacePercentageByText)+'</tspan><tspan class="percent">'+(T.noPercentageSign||null!==T.replacePercentageByText?"":"%")+"</tspan></text>"))}else!function(){if(0<T.percentages.length){var e,t,i,s,n=T.percentages,a=47,r=360,o="";for(e=0;e<n.length;++e)i=n[e].percent,s=n[e].color,t=r/100*i,0<e&&(t=(r+=62.5)/100*i),o+='<circle cx="100" cy="100" r="'+(a+=10)+'" class="border" fill="'+T.fillColor+'" stroke="'+T.backgroundColor+'" stroke-width="'+f+'" stroke-dasharray="'+r+'" transform="rotate('+-90+',100,100)" /><circle class="circle" id="circle'+(e+1)+'" data-percent="'+i+'" cx="100" cy="100" r="'+a+'" class="border" fill="none" stroke="'+s+'" stroke-width="'+T.foregroundBorderWidth+'" stroke-dasharray="'+t+',20000" transform="rotate('+-90+',100,100)" stroke-linecap="'+T.strokeLinecap+'" />';var l=0===T.showPercent?"display:none":"";d.addClass("svg-container").append(M('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 194 186" class="circliful">'+(void 0!==h?h:"")+o+u+'<text class="timer" text-anchor="middle" x="'+m+'" y="'+p+'" style="font-size: '+T.percentageTextSize+"px; ;"+T.textAdditionalCss+'" fill="'+T.fontColor+'"><tspan class="number" style="'+l+'">'+(null===T.replacePercentageByText?0:T.replacePercentageByText)+'</tspan><tspan class="percent">'+(T.noPercentageSign||null!==T.replacePercentageByText?"":"%")+"</tspan></text>")),0<T.percentages.length&&function(){var e,t=d.height(),i=d.width(),s=T.percentages,n="";for(e=0;e<s.length;++e){var a=s[e].title;n+='<div><span class="color-box" style="background: '+s[e].color+'"></span>'+a+", "+s[e].percent+"%</div>"}d.append(M("<div/>").append(n).attr("style","position:absolute;top:"+t/3+"px;left:"+(i+20)+"px").attr("class","legend-line"))}()}else{var c="";""!==T.beforePercent&&(c="f"===T.beforePercent.charAt(0)?'<tspan class="icon before-percent">&#x'+T.beforePercent+" </tspan>":'<tspan class="before-percent">'+T.beforePercent+" </tspan>");l=0===T.showPercent?"display:none":"";d.addClass("svg-container").append(M('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 194 186" class="circliful">'+(void 0!==h?h:"")+'<circle cx="100" cy="100" r="57" class="border" fill="'+T.fillColor+'" stroke="'+T.backgroundColor+'" stroke-width="'+f+'" stroke-dasharray="360" transform="rotate(-90,100,100)" /><circle class="circle" cx="100" cy="100" r="57" fill="none" stroke="'+T.foregroundColor+'" stroke-width="'+T.foregroundBorderWidth+'" stroke-dasharray="0,20000" transform="rotate(-90,100,100)" stroke-linecap="'+T.strokeLinecap+'" /><circle cx="100" cy="100" r="'+T.pointSize+'" fill="'+T.pointColor+'" />'+u+'<text class="timer" text-anchor="middle" x="'+m+'" y="'+p+'" style="font-size: '+T.percentageTextSize+"px; ;"+T.textAdditionalCss+'" fill="'+T.fontColor+'">'+c+'<tspan class="number" style="'+l+'">'+(null===T.replacePercentageByText?0:T.replacePercentageByText)+'</tspan><tspan class="percent">'+(T.noPercentageSign||null!==T.replacePercentageByText?"":"%")+"</tspan></text>"))}}();var o=d.find(".circle"),l=d.find(".timer"),c=30,g=0,y=T.animationStep,v=0,k=0,w=a,x=3.6*a;function C(){var e=o,t=x;if(0<T.percentages.length){var i,s=T.percentages,n=360;for(i=0;i<s.length;++i)t=n/100*(a=s[i].percent),e=d.find("#circle"+(i+1)),0<i&&(t=(n+=62.5)/100*a),_(e,t,n,a)}else _(e,t,360,T.percent)}function _(i,e,s,t){var n=window.setInterval(function(){e<=g?(window.clearInterval(n),v=1,"function"==typeof b&&b.call(this)):g+=y,T.halfCircle?t<=2*g/(s/100)&&1===v&&(g=s/100*t/2):t<=g/(s/100)&&1===v&&(g=s/100*t),k>T.target&&1===v&&(k=T.target),null===T.replacePercentageByText&&(w=T.halfCircle?parseFloat(100*g/s*2):parseFloat(100*g/s),!T.alwaysDecimals&&(0===t||1<t&&1!==v)?(w=Math.floor(w))>T.percent&&(w=T.percent.toFixed(T.decimals)):w=1!==v?Math.floor(w):T.percent.toFixed(T.decimals)),i.attr("stroke-dasharray",g+", 20000"),0===T.percentages.length?1===T.showPercent?l.find(".number").text(w):(l.find(".number").text(k),l.find(".percent").text("")):(l.find(".number").text(""),l.find(".percent").text("")),null!==r&&M.each(r,function(e,t){T.halfCircle&&(e/=2),e*(s/100)<=g&&i.css({stroke:t,transition:"stroke 0.1s linear"})})}.bind(i),c)}function D(){var e,t,i,s;o.hasClass("start")||(t=(e=o.offset().top)+o.outerHeight(),s=(i=M(window).scrollTop())+M(window).height(),i<t&&e<s&&(o.addClass("start"),setTimeout(C,250)))}T.halfCircle&&(x=3.6*a/2),null!==T.replacePercentageByText&&(w=T.replacePercentageByText),1===T.animation||T.animateInView?T.animateInView?(D(),M(window).scroll(function(){D()})):C():0===T.percentages.length?(o.attr("stroke-dasharray",x+", 20000"),1===T.showPercent?l.find(".number").text(w):(l.find(".number").text(T.target),l.find(".percent").text(""))):null!==T.replacePercentageByText&&(l.find(".number").text(T.replacePercentageByText),l.find(".percent").text(""))})}}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):window.jQuery||window.Zepto)}(function(d){var h,s,u,n,p,t,l="Close",c="BeforeClose",m="MarkupParse",f="Open",g=".mfp",y="mfp-ready",i="mfp-removing",r="mfp-prevent-close",e=function(){},o=!!window.jQuery,v=d(window),k=function(e,t){h.ev.on("mfp"+e+g,t)},w=function(e,t,i,s){var n=document.createElement("div");return n.className="mfp-"+e,i&&(n.innerHTML=i),s?t&&t.appendChild(n):(n=d(n),t&&n.appendTo(t)),n},x=function(e,t){h.ev.triggerHandler("mfp"+e,t),h.st.callbacks&&(e=e.charAt(0).toLowerCase()+e.slice(1),h.st.callbacks[e]&&h.st.callbacks[e].apply(h,d.isArray(t)?t:[t]))},C=function(e){return e===t&&h.currTemplate.closeBtn||(h.currTemplate.closeBtn=d(h.st.closeMarkup.replace("%title%",h.st.tClose)),t=e),h.currTemplate.closeBtn},a=function(){d.magnificPopup.instance||((h=new e).init(),d.magnificPopup.instance=h)};e.prototype={constructor:e,init:function(){var e=navigator.appVersion;h.isLowIE=h.isIE8=document.all&&!document.addEventListener,h.isAndroid=/android/gi.test(e),h.isIOS=/iphone|ipad|ipod/gi.test(e),h.supportsTransition=function(){var e=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(void 0!==e.transition)return!0;for(;t.length;)if(t.pop()+"Transition"in e)return!0;return!1}(),h.probablyMobile=h.isAndroid||h.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),u=d(document),h.popupsCache={}},open:function(e){var t;if(!1===e.isObj){h.items=e.items.toArray(),h.index=0;var i,s=e.items;for(t=0;t<s.length;t++)if((i=s[t]).parsed&&(i=i.el[0]),i===e.el[0]){h.index=t;break}}else h.items=d.isArray(e.items)?e.items:[e.items],h.index=e.index||0;if(!h.isOpen){h.types=[],p="",e.mainEl&&e.mainEl.length?h.ev=e.mainEl.eq(0):h.ev=u,e.key?(h.popupsCache[e.key]||(h.popupsCache[e.key]={}),h.currTemplate=h.popupsCache[e.key]):h.currTemplate={},h.st=d.extend(!0,{},d.magnificPopup.defaults,e),h.fixedContentPos="auto"===h.st.fixedContentPos?!h.probablyMobile:h.st.fixedContentPos,h.st.modal&&(h.st.closeOnContentClick=!1,h.st.closeOnBgClick=!1,h.st.showCloseBtn=!1,h.st.enableEscapeKey=!1),h.bgOverlay||(h.bgOverlay=w("bg").on("click"+g,function(){h.close()}),h.wrap=w("wrap").attr("tabindex",-1).on("click"+g,function(e){h._checkIfClose(e.target)&&h.close()}),h.container=w("container",h.wrap)),h.contentContainer=w("content"),h.st.preloader&&(h.preloader=w("preloader",h.container,h.st.tLoading));var n=d.magnificPopup.modules;for(t=0;t<n.length;t++){var a=n[t];a=a.charAt(0).toUpperCase()+a.slice(1),h["init"+a].call(h)}x("BeforeOpen"),h.st.showCloseBtn&&(h.st.closeBtnInside?(k(m,function(e,t,i,s){i.close_replaceWith=C(s.type)}),p+=" mfp-close-btn-in"):h.wrap.append(C())),h.st.alignTop&&(p+=" mfp-align-top"),h.fixedContentPos?h.wrap.css({overflow:h.st.overflowY,overflowX:"hidden",overflowY:h.st.overflowY}):h.wrap.css({top:v.scrollTop(),position:"absolute"}),(!1===h.st.fixedBgPos||"auto"===h.st.fixedBgPos&&!h.fixedContentPos)&&h.bgOverlay.css({height:u.height(),position:"absolute"}),h.st.enableEscapeKey&&u.on("keyup"+g,function(e){27===e.keyCode&&h.close()}),v.on("resize"+g,function(){h.updateSize()}),h.st.closeOnContentClick||(p+=" mfp-auto-cursor"),p&&h.wrap.addClass(p);var r=h.wH=v.height(),o={};if(h.fixedContentPos&&h._hasScrollBar(r)){var l=h._getScrollbarSize();l&&(o.marginRight=l)}h.fixedContentPos&&(h.isIE7?d("body, html").css("overflow","hidden"):o.overflow="hidden");var c=h.st.mainClass;return h.isIE7&&(c+=" mfp-ie7"),c&&h._addClassToMFP(c),h.updateItemHTML(),x("BuildControls"),d("html").css(o),h.bgOverlay.add(h.wrap).prependTo(h.st.prependTo||d(document.body)),h._lastFocusedEl=document.activeElement,setTimeout(function(){h.content?(h._addClassToMFP(y),h._setFocus()):h.bgOverlay.addClass(y),u.on("focusin"+g,h._onFocusIn)},16),h.isOpen=!0,h.updateSize(r),x(f),e}h.updateItemHTML()},close:function(){h.isOpen&&(x(c),h.isOpen=!1,h.st.removalDelay&&!h.isLowIE&&h.supportsTransition?(h._addClassToMFP(i),setTimeout(function(){h._close()},h.st.removalDelay)):h._close())},_close:function(){x(l);var e=i+" "+y+" ";if(h.bgOverlay.detach(),h.wrap.detach(),h.container.empty(),h.st.mainClass&&(e+=h.st.mainClass+" "),h._removeClassFromMFP(e),h.fixedContentPos){var t={marginRight:""};h.isIE7?d("body, html").css("overflow",""):t.overflow="",d("html").css(t)}u.off("keyup.mfp focusin"+g),h.ev.off(g),h.wrap.attr("class","mfp-wrap").removeAttr("style"),h.bgOverlay.attr("class","mfp-bg"),h.container.attr("class","mfp-container"),!h.st.showCloseBtn||h.st.closeBtnInside&&!0!==h.currTemplate[h.currItem.type]||h.currTemplate.closeBtn&&h.currTemplate.closeBtn.detach(),h.st.autoFocusLast&&h._lastFocusedEl&&d(h._lastFocusedEl).focus(),h.currItem=null,h.content=null,h.currTemplate=null,h.prevHeight=0,x("AfterClose")},updateSize:function(e){if(h.isIOS){var t=document.documentElement.clientWidth/window.innerWidth,i=window.innerHeight*t;h.wrap.css("height",i),h.wH=i}else h.wH=e||v.height();h.fixedContentPos||h.wrap.css("height",h.wH),x("Resize")},updateItemHTML:function(){var e=h.items[h.index];h.contentContainer.detach(),h.content&&h.content.detach(),e.parsed||(e=h.parseEl(h.index));var t=e.type;if(x("BeforeChange",[h.currItem?h.currItem.type:"",t]),h.currItem=e,!h.currTemplate[t]){var i=!!h.st[t]&&h.st[t].markup;x("FirstMarkupParse",i),h.currTemplate[t]=!i||d(i)}n&&n!==e.type&&h.container.removeClass("mfp-"+n+"-holder");var s=h["get"+t.charAt(0).toUpperCase()+t.slice(1)](e,h.currTemplate[t]);h.appendContent(s,t),e.preloaded=!0,x("Change",e),n=e.type,h.container.prepend(h.contentContainer),x("AfterChange")},appendContent:function(e,t){(h.content=e)?h.st.showCloseBtn&&h.st.closeBtnInside&&!0===h.currTemplate[t]?h.content.find(".mfp-close").length||h.content.append(C()):h.content=e:h.content="",x("BeforeAppend"),h.container.addClass("mfp-"+t+"-holder"),h.contentContainer.append(h.content)},parseEl:function(e){var t,i=h.items[e];if((i=i.tagName?{el:d(i)}:(t=i.type,{data:i,src:i.src})).el){for(var s=h.types,n=0;n<s.length;n++)if(i.el.hasClass("mfp-"+s[n])){t=s[n];break}i.src=i.el.attr("data-mfp-src"),i.src||(i.src=i.el.attr("href"))}return i.type=t||h.st.type||"inline",i.index=e,i.parsed=!0,h.items[e]=i,x("ElementParse",i),h.items[e]},addGroup:function(t,i){var e=function(e){e.mfpEl=this,h._openClick(e,t,i)};i||(i={});var s="click.magnificPopup";i.mainEl=t,i.items?(i.isObj=!0,t.off(s).on(s,e)):(i.isObj=!1,i.delegate?t.off(s).on(s,i.delegate,e):(i.items=t).off(s).on(s,e))},_openClick:function(e,t,i){if((void 0!==i.midClick?i.midClick:d.magnificPopup.defaults.midClick)||!(2===e.which||e.ctrlKey||e.metaKey||e.altKey||e.shiftKey)){var s=void 0!==i.disableOn?i.disableOn:d.magnificPopup.defaults.disableOn;if(s)if(d.isFunction(s)){if(!s.call(h))return!0}else if(v.width()<s)return!0;e.type&&(e.preventDefault(),h.isOpen&&e.stopPropagation()),i.el=d(e.mfpEl),i.delegate&&(i.items=t.find(i.delegate)),h.open(i)}},updateStatus:function(e,t){if(h.preloader){s!==e&&h.container.removeClass("mfp-s-"+s),t||"loading"!==e||(t=h.st.tLoading);var i={status:e,text:t};x("UpdateStatus",i),e=i.status,t=i.text,h.preloader.html(t),h.preloader.find("a").on("click",function(e){e.stopImmediatePropagation()}),h.container.addClass("mfp-s-"+e),s=e}},_checkIfClose:function(e){if(!d(e).hasClass(r)){var t=h.st.closeOnContentClick,i=h.st.closeOnBgClick;if(t&&i)return!0;if(!h.content||d(e).hasClass("mfp-close")||h.preloader&&e===h.preloader[0])return!0;if(e===h.content[0]||d.contains(h.content[0],e)){if(t)return!0}else if(i&&d.contains(document,e))return!0;return!1}},_addClassToMFP:function(e){h.bgOverlay.addClass(e),h.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e),h.wrap.removeClass(e)},_hasScrollBar:function(e){return(h.isIE7?u.height():document.body.scrollHeight)>(e||v.height())},_setFocus:function(){(h.st.focus?h.content.find(h.st.focus).eq(0):h.wrap).focus()},_onFocusIn:function(e){return e.target===h.wrap[0]||d.contains(h.wrap[0],e.target)?void 0:(h._setFocus(),!1)},_parseMarkup:function(n,e,t){var a;t.data&&(e=d.extend(t.data,e)),x(m,[n,e,t]),d.each(e,function(e,t){if(void 0===t||!1===t)return!0;if(1<(a=e.split("_")).length){var i=n.find(g+"-"+a[0]);if(0<i.length){var s=a[1];"replaceWith"===s?i[0]!==t[0]&&i.replaceWith(t):"img"===s?i.is("img")?i.attr("src",t):i.replaceWith(d("<img>").attr("src",t).attr("class",i.attr("class"))):i.attr(a[1],t)}}else n.find(g+"-"+e).html(t)})},_getScrollbarSize:function(){if(void 0===h.scrollbarSize){var e=document.createElement("div");e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),h.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return h.scrollbarSize}},d.magnificPopup={instance:null,proto:e.prototype,modules:[],open:function(e,t){return a(),(e=e?d.extend(!0,{},e):{}).isObj=!0,e.index=t||0,this.instance.open(e)},close:function(){return d.magnificPopup.instance&&d.magnificPopup.instance.close()},registerModule:function(e,t){t.options&&(d.magnificPopup.defaults[e]=t.options),d.extend(this.proto,t.proto),this.modules.push(e)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;</button>',tClose:"Close (Esc)",tLoading:"Loading...",autoFocusLast:!0}},d.fn.magnificPopup=function(e){a();var t=d(this);if("string"==typeof e)if("open"===e){var i,s=o?t.data("magnificPopup"):t[0].magnificPopup,n=parseInt(arguments[1],10)||0;i=s.items?s.items[n]:(i=t,s.delegate&&(i=i.find(s.delegate)),i.eq(n)),h._openClick({mfpEl:i},t,s)}else h.isOpen&&h[e].apply(h,Array.prototype.slice.call(arguments,1));else e=d.extend(!0,{},e),o?t.data("magnificPopup",e):t[0].magnificPopup=e,h.addGroup(t,e);return t};var _,D,b,T="inline",M=function(){b&&(D.after(b.addClass(_)).detach(),b=null)};d.magnificPopup.registerModule(T,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){h.types.push(T),k(l+"."+T,function(){M()})},getInline:function(e,t){if(M(),e.src){var i=h.st.inline,s=d(e.src);if(s.length){var n=s[0].parentNode;n&&n.tagName&&(D||(_=i.hiddenClass,D=w(_),_="mfp-"+_),b=s.after(D).detach().removeClass(_)),h.updateStatus("ready")}else h.updateStatus("error",i.tNotFound),s=d("<div>");return e.inlineElement=s}return h.updateStatus("ready"),h._parseMarkup(t,{},e),t}}});var S,P="ajax",I=function(){S&&d(document.body).removeClass(S)},H=function(){I(),h.req&&h.req.abort()};d.magnificPopup.registerModule(P,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){h.types.push(P),S=h.st.ajax.cursor,k(l+"."+P,H),k("BeforeChange."+P,H)},getAjax:function(n){S&&d(document.body).addClass(S),h.updateStatus("loading");var e=d.extend({url:n.src,success:function(e,t,i){var s={data:e,xhr:i};x("ParseAjax",s),h.appendContent(d(s.data),P),n.finished=!0,I(),h._setFocus(),setTimeout(function(){h.wrap.addClass(y)},16),h.updateStatus("ready"),x("AjaxContentAdded")},error:function(){I(),n.finished=n.loadError=!0,h.updateStatus("error",h.st.ajax.tError.replace("%url%",n.src))}},h.st.ajax.settings);return h.req=d.ajax(e),""}}});var $;d.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var e=h.st.image,t=".image";h.types.push("image"),k(f+t,function(){"image"===h.currItem.type&&e.cursor&&d(document.body).addClass(e.cursor)}),k(l+t,function(){e.cursor&&d(document.body).removeClass(e.cursor),v.off("resize"+g)}),k("Resize"+t,h.resizeImage),h.isLowIE&&k("AfterChange",h.resizeImage)},resizeImage:function(){var e=h.currItem;if(e&&e.img&&h.st.image.verticalFit){var t=0;h.isLowIE&&(t=parseInt(e.img.css("padding-top"),10)+parseInt(e.img.css("padding-bottom"),10)),e.img.css("max-height",h.wH-t)}},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,$&&clearInterval($),e.isCheckingImgSize=!1,x("ImageHasSize",e),e.imgHidden&&(h.content&&h.content.removeClass("mfp-loading"),e.imgHidden=!1))},findImageSize:function(i){var s=0,n=i.img[0];!function e(t){$&&clearInterval($),$=setInterval(function(){return 0<n.naturalWidth?void h._onImageHasSize(i):(200<s&&clearInterval($),void(3==++s?e(10):40===s?e(50):100===s&&e(500)))},t)}(1)},getImage:function(t,e){var i=0,s=function(){t&&(t.img.off(".mfploader"),t===h.currItem&&(h._onImageHasSize(t),h.updateStatus("error",n.tError.replace("%url%",t.src))),t.hasSize=!0,t.loaded=!0,t.loadError=!0)},n=h.st.image,a=e.find(".mfp-img");if(a.length){var r=document.createElement("img");r.className="mfp-img",t.el&&t.el.find("img").length&&(r.alt=t.el.find("img").attr("alt")),t.img=d(r).on("load.mfploader",function e(){t&&(t.img[0].complete?(t.img.off(".mfploader"),t===h.currItem&&(h._onImageHasSize(t),h.updateStatus("ready")),t.hasSize=!0,t.loaded=!0,x("ImageLoadComplete")):++i<200?setTimeout(e,100):s())}).on("error.mfploader",s),r.src=t.src,a.is("img")&&(t.img=t.img.clone()),0<(r=t.img[0]).naturalWidth?t.hasSize=!0:r.width||(t.hasSize=!1)}return h._parseMarkup(e,{title:function(e){if(e.data&&void 0!==e.data.title)return e.data.title;var t=h.st.image.titleSrc;if(t){if(d.isFunction(t))return t.call(h,e);if(e.el)return e.el.attr(t)||""}return""}(t),img_replaceWith:t.img},t),h.resizeImage(),t.hasSize?($&&clearInterval($),t.loadError?(e.addClass("mfp-loading"),h.updateStatus("error",n.tError.replace("%url%",t.src))):(e.removeClass("mfp-loading"),h.updateStatus("ready"))):(h.updateStatus("loading"),t.loading=!0,t.hasSize||(t.imgHidden=!0,e.addClass("mfp-loading"),h.findImageSize(t))),e}}});var B;d.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(e){return e.is("img")?e:e.find("img")}},proto:{initZoom:function(){var e,a=h.st.zoom,t=".zoom";if(a.enabled&&h.supportsTransition){var i,s,n=a.duration,r=function(e){var t=e.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),i="all "+a.duration/1e3+"s "+a.easing,s={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},n="transition";return s["-webkit-"+n]=s["-moz-"+n]=s["-o-"+n]=s[n]=i,t.css(s),t},o=function(){h.content.css("visibility","visible")};k("BuildControls"+t,function(){if(h._allowZoom()){if(clearTimeout(i),h.content.css("visibility","hidden"),!(e=h._getItemToZoom()))return void o();(s=r(e)).css(h._getOffset()),h.wrap.append(s),i=setTimeout(function(){s.css(h._getOffset(!0)),i=setTimeout(function(){o(),setTimeout(function(){s.remove(),e=s=null,x("ZoomAnimationEnded")},16)},n)},16)}}),k(c+t,function(){if(h._allowZoom()){if(clearTimeout(i),h.st.removalDelay=n,!e){if(!(e=h._getItemToZoom()))return;s=r(e)}s.css(h._getOffset(!0)),h.wrap.append(s),h.content.css("visibility","hidden"),setTimeout(function(){s.css(h._getOffset())},16)}}),k(l+t,function(){h._allowZoom()&&(o(),s&&s.remove(),e=null)})}},_allowZoom:function(){return"image"===h.currItem.type},_getItemToZoom:function(){return!!h.currItem.hasSize&&h.currItem.img},_getOffset:function(e){var t,i=(t=e?h.currItem.img:h.st.zoom.opener(h.currItem.el||h.currItem)).offset(),s=parseInt(t.css("padding-top"),10),n=parseInt(t.css("padding-bottom"),10);i.top-=d(window).scrollTop()-s;var a={width:t.width(),height:(o?t.innerHeight():t[0].offsetHeight)-n-s};return void 0===B&&(B=void 0!==document.createElement("p").style.MozTransform),B?a["-moz-transform"]=a.transform="translate("+i.left+"px,"+i.top+"px)":(a.left=i.left,a.top=i.top),a}}});var F="iframe",E=function(e){if(h.currTemplate[F]){var t=h.currTemplate[F].find("iframe");t.length&&(e||(t[0].src="//about:blank"),h.isIE8&&t.css("display",e?"block":"none"))}};d.magnificPopup.registerModule(F,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){h.types.push(F),k("BeforeChange",function(e,t,i){t!==i&&(t===F?E():i===F&&E(!0))}),k(l+"."+F,function(){E()})},getIframe:function(e,t){var i=e.src,s=h.st.iframe;d.each(s.patterns,function(){return-1<i.indexOf(this.index)?(this.id&&(i="string"==typeof this.id?i.substr(i.lastIndexOf(this.id)+this.id.length,i.length):this.id.call(this,i)),i=this.src.replace("%id%",i),!1):void 0});var n={};return s.srcAction&&(n[s.srcAction]=i),h._parseMarkup(t,n,e),h.updateStatus("ready"),t}}});var R=function(e){var t=h.items.length;return t-1<e?e-t:e<0?t+e:e},O=function(e,t,i){return e.replace(/%curr%/gi,t+1).replace(/%total%/gi,i)};d.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var a=h.st.gallery,e=".mfp-gallery";return h.direction=!0,!(!a||!a.enabled)&&(p+=" mfp-gallery",k(f+e,function(){a.navigateByImgClick&&h.wrap.on("click"+e,".mfp-img",function(){return 1<h.items.length?(h.next(),!1):void 0}),u.on("keydown"+e,function(e){37===e.keyCode?h.prev():39===e.keyCode&&h.next()})}),k("UpdateStatus"+e,function(e,t){t.text&&(t.text=O(t.text,h.currItem.index,h.items.length))}),k(m+e,function(e,t,i,s){var n=h.items.length;i.counter=1<n?O(a.tCounter,s.index,n):""}),k("BuildControls"+e,function(){if(1<h.items.length&&a.arrows&&!h.arrowLeft){var e=a.arrowMarkup,t=h.arrowLeft=d(e.replace(/%title%/gi,a.tPrev).replace(/%dir%/gi,"left")).addClass(r),i=h.arrowRight=d(e.replace(/%title%/gi,a.tNext).replace(/%dir%/gi,"right")).addClass(r);t.click(function(){h.prev()}),i.click(function(){h.next()}),h.container.append(t.add(i))}}),k("Change"+e,function(){h._preloadTimeout&&clearTimeout(h._preloadTimeout),h._preloadTimeout=setTimeout(function(){h.preloadNearbyImages(),h._preloadTimeout=null},16)}),void k(l+e,function(){u.off(e),h.wrap.off("click"+e),h.arrowRight=h.arrowLeft=null}))},next:function(){h.direction=!0,h.index=R(h.index+1),h.updateItemHTML()},prev:function(){h.direction=!1,h.index=R(h.index-1),h.updateItemHTML()},goTo:function(e){h.direction=e>=h.index,h.index=e,h.updateItemHTML()},preloadNearbyImages:function(){var e,t=h.st.gallery.preload,i=Math.min(t[0],h.items.length),s=Math.min(t[1],h.items.length);for(e=1;e<=(h.direction?s:i);e++)h._preloadItem(h.index+e);for(e=1;e<=(h.direction?i:s);e++)h._preloadItem(h.index-e)},_preloadItem:function(e){if(e=R(e),!h.items[e].preloaded){var t=h.items[e];t.parsed||(t=h.parseEl(e)),x("LazyLoad",t),"image"===t.type&&(t.img=d('<img class="mfp-img" />').on("load.mfploader",function(){t.hasSize=!0}).on("error.mfploader",function(){t.hasSize=!0,t.loadError=!0,x("LazyLoadError",t)}).attr("src",t.src)),t.preloaded=!0}}}});var z="retina";d.magnificPopup.registerModule(z,{options:{replaceSrc:function(e){return e.src.replace(/\.\w+$/,function(e){return"@2x"+e})},ratio:1},proto:{initRetina:function(){if(1<window.devicePixelRatio){var i=h.st.retina,s=i.ratio;1<(s=isNaN(s)?s():s)&&(k("ImageHasSize."+z,function(e,t){t.img.css({"max-width":t.img[0].naturalWidth/s,width:"100%"})}),k("ElementParse."+z,function(e,t){t.src=i.replaceSrc(t,s)}))}}}}),a()}),function(e,r,a){var i,s,m,n,t,o,l,c,d,h,u,p,f,g,y;o={classes:"",inline:t=!(n="datepicker"),language:"ru",startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"@",toggleSelected:!0,keyboardNav:!0,position:"bottom left",offset:12,view:"days",minView:"days",showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:",",range:!1,todayButton:!1,clearButton:!1,showEvent:"focus",autoClose:!1,monthsField:"monthsShort",prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:"",onShow:"",onHide:"",onChangeMonth:"",onChangeYear:"",onChangeDecade:"",onChangeView:"",onRenderCell:""},l={ctrlRight:[17,39],ctrlUp:[17,38],ctrlLeft:[17,37],ctrlDown:[17,40],shiftRight:[16,39],shiftUp:[16,38],shiftLeft:[16,37],shiftDown:[16,40],altUp:[18,38],altRight:[18,39],altLeft:[18,37],altDown:[18,40],ctrlShiftUp:[16,17,38]},(m=c=function(e,t){this.el=e,this.$el=r(e),this.opts=r.extend(!0,{},o,t,this.$el.data()),i==a&&(i=r("body")),this.opts.startDate||(this.opts.startDate=new Date),"INPUT"==this.el.nodeName&&(this.elIsInput=!0),this.opts.altField&&(this.$altField="string"==typeof this.opts.altField?r(this.opts.altField):this.opts.altField),this.inited=!1,this.visible=!1,this.silent=!1,this.currentDate=this.opts.startDate,this.currentView=this.opts.view,this._createShortCuts(),this.selectedDates=[],this.views={},this.keys=[],this.minRange="",this.maxRange="",this._prevOnSelectValue="",this.init()}).prototype={VERSION:"2.2.3",viewIndexes:["days","months","years"],init:function(){t||this.opts.inline||!this.elIsInput||this._buildDatepickersContainer(),this._buildBaseHtml(),this._defineLocale(this.opts.language),this._syncWithMinMaxDates(),this.elIsInput&&(this.opts.inline||(this._setPositionClasses(this.opts.position),this._bindEvents()),this.opts.keyboardNav&&!this.opts.onlyTimepicker&&this._bindKeyboardEvents(),this.$datepicker.on("mousedown",this._onMouseDownDatepicker.bind(this)),this.$datepicker.on("mouseup",this._onMouseUpDatepicker.bind(this))),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this.opts.timepicker&&(this.timepicker=new r.fn.datepicker.Timepicker(this,this.opts),this._bindTimepickerEvents()),this.opts.onlyTimepicker&&this.$datepicker.addClass("-only-timepicker-"),this.views[this.currentView]=new r.fn.datepicker.Body(this,this.currentView,this.opts),this.views[this.currentView].show(),this.nav=new r.fn.datepicker.Navigation(this,this.opts),this.view=this.currentView,this.$el.on("clickCell.adp",this._onClickCell.bind(this)),this.$datepicker.on("mouseenter",".datepicker--cell",this._onMouseEnterCell.bind(this)),this.$datepicker.on("mouseleave",".datepicker--cell",this._onMouseLeaveCell.bind(this)),this.inited=!0},_createShortCuts:function(){this.minDate=this.opts.minDate?this.opts.minDate:new Date(-86399999136e5),this.maxDate=this.opts.maxDate?this.opts.maxDate:new Date(86399999136e5)},_bindEvents:function(){this.$el.on(this.opts.showEvent+".adp",this._onShowEvent.bind(this)),this.$el.on("mouseup.adp",this._onMouseUpEl.bind(this)),this.$el.on("blur.adp",this._onBlur.bind(this)),this.$el.on("keyup.adp",this._onKeyUpGeneral.bind(this)),r(e).on("resize.adp",this._onResize.bind(this)),r("body").on("mouseup.adp",this._onMouseUpBody.bind(this))},_bindKeyboardEvents:function(){this.$el.on("keydown.adp",this._onKeyDown.bind(this)),this.$el.on("keyup.adp",this._onKeyUp.bind(this)),this.$el.on("hotKey.adp",this._onHotKey.bind(this))},_bindTimepickerEvents:function(){this.$el.on("timeChange.adp",this._onTimeChange.bind(this))},isWeekend:function(e){return-1!==this.opts.weekends.indexOf(e)},_defineLocale:function(e){this.loc="string"==typeof e?(this.loc=r.fn.datepicker.language[e],this.loc||(console.warn("Can't find language \""+e+'" in Datepicker.language, will use "ru" instead'),this.loc=r.extend(!0,{},r.fn.datepicker.language.ru)),r.extend(!0,{},r.fn.datepicker.language.ru,r.fn.datepicker.language[e])):r.extend(!0,{},r.fn.datepicker.language.ru,e),this.opts.dateFormat&&(this.loc.dateFormat=this.opts.dateFormat),this.opts.timeFormat&&(this.loc.timeFormat=this.opts.timeFormat),""!==this.opts.firstDay&&(this.loc.firstDay=this.opts.firstDay),this.opts.timepicker&&(this.loc.dateFormat=[this.loc.dateFormat,this.loc.timeFormat].join(this.opts.dateTimeSeparator)),this.opts.onlyTimepicker&&(this.loc.dateFormat=this.loc.timeFormat);var t=this._getWordBoundaryRegExp;(this.loc.timeFormat.match(t("aa"))||this.loc.timeFormat.match(t("AA")))&&(this.ampm=!0)},_buildDatepickersContainer:function(){t=!0,i.append('<div class="datepickers-container" id="datepickers-container"></div>'),s=r("#datepickers-container")},_buildBaseHtml:function(){var e,t=r('<div class="datepicker-inline">');e="INPUT"==this.el.nodeName?this.opts.inline?t.insertAfter(this.$el):s:t.appendTo(this.$el),this.$datepicker=r('<div class="datepicker"><i class="datepicker--pointer"></i><nav class="datepicker--nav"></nav><div class="datepicker--content"></div></div>').appendTo(e),this.$content=r(".datepicker--content",this.$datepicker),this.$nav=r(".datepicker--nav",this.$datepicker)},_triggerOnChange:function(){if(!this.selectedDates.length){if(""===this._prevOnSelectValue)return;return this._prevOnSelectValue="",this.opts.onSelect("","",this)}var e,t=this.selectedDates,i=m.getParsedDate(t[0]),s=this,n=new Date(i.year,i.month,i.date,i.hours,i.minutes);e=t.map(function(e){return s.formatDate(s.loc.dateFormat,e)}).join(this.opts.multipleDatesSeparator),(this.opts.multipleDates||this.opts.range)&&(n=t.map(function(e){var t=m.getParsedDate(e);return new Date(t.year,t.month,t.date,t.hours,t.minutes)})),this._prevOnSelectValue=e,this.opts.onSelect(e,n,this)},next:function(){var e=this.parsedDate,t=this.opts;switch(this.view){case"days":this.date=new Date(e.year,e.month+1,1),t.onChangeMonth&&t.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(e.year+1,e.month,1),t.onChangeYear&&t.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(e.year+10,0,1),t.onChangeDecade&&t.onChangeDecade(this.curDecade)}},prev:function(){var e=this.parsedDate,t=this.opts;switch(this.view){case"days":this.date=new Date(e.year,e.month-1,1),t.onChangeMonth&&t.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(e.year-1,e.month,1),t.onChangeYear&&t.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(e.year-10,0,1),t.onChangeDecade&&t.onChangeDecade(this.curDecade)}},formatDate:function(e,t){t=t||this.date;var i,s=e,n=this._getWordBoundaryRegExp,a=this.loc,r=m.getLeadingZeroNum,o=m.getDecade(t),l=m.getParsedDate(t),c=l.fullHours,d=l.hours,h=e.match(n("aa"))||e.match(n("AA")),u="am",p=this._replacer;switch(this.opts.timepicker&&this.timepicker&&h&&(c=r((i=this.timepicker._getValidHoursFromDate(t,h)).hours),d=i.hours,u=i.dayPeriod),!0){case/@/.test(s):s=s.replace(/@/,t.getTime());case/aa/.test(s):s=p(s,n("aa"),u);case/AA/.test(s):s=p(s,n("AA"),u.toUpperCase());case/dd/.test(s):s=p(s,n("dd"),l.fullDate);case/d/.test(s):s=p(s,n("d"),l.date);case/DD/.test(s):s=p(s,n("DD"),a.days[l.day]);case/D/.test(s):s=p(s,n("D"),a.daysShort[l.day]);case/mm/.test(s):s=p(s,n("mm"),l.fullMonth);case/m/.test(s):s=p(s,n("m"),l.month+1);case/MM/.test(s):s=p(s,n("MM"),this.loc.months[l.month]);case/M/.test(s):s=p(s,n("M"),a.monthsShort[l.month]);case/ii/.test(s):s=p(s,n("ii"),l.fullMinutes);case/i/.test(s):s=p(s,n("i"),l.minutes);case/hh/.test(s):s=p(s,n("hh"),c);case/h/.test(s):s=p(s,n("h"),d);case/yyyy/.test(s):s=p(s,n("yyyy"),l.year);case/yyyy1/.test(s):s=p(s,n("yyyy1"),o[0]);case/yyyy2/.test(s):s=p(s,n("yyyy2"),o[1]);case/yy/.test(s):s=p(s,n("yy"),l.year.toString().slice(-2))}return s},_replacer:function(e,t,n){return e.replace(t,function(e,t,i,s){return t+n+s})},_getWordBoundaryRegExp:function(e){var t="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+t+")("+e+")($|<|"+t+")","g")},selectDate:function(e){var t=this,i=t.opts,s=t.parsedDate,n=t.selectedDates.length,a="";if(Array.isArray(e))e.forEach(function(e){t.selectDate(e)});else if(e instanceof Date){if(this.lastSelectedDate=e,this.timepicker&&this.timepicker._setTime(e),t._trigger("selectDate",e),this.timepicker&&(e.setHours(this.timepicker.hours),e.setMinutes(this.timepicker.minutes)),"days"==t.view&&e.getMonth()!=s.month&&i.moveToOtherMonthsOnSelect&&(a=new Date(e.getFullYear(),e.getMonth(),1)),"years"==t.view&&e.getFullYear()!=s.year&&i.moveToOtherYearsOnSelect&&(a=new Date(e.getFullYear(),0,1)),a&&(t.silent=!0,t.date=a,t.silent=!1,t.nav._render()),i.multipleDates&&!i.range){if(n===i.multipleDates)return;t._isSelected(e)||t.selectedDates.push(e)}else i.range?2==n?(t.selectedDates=[e],t.minRange=e,t.maxRange=""):1==n?(t.selectedDates.push(e),t.maxRange?t.minRange=e:t.maxRange=e,m.bigger(t.maxRange,t.minRange)&&(t.maxRange=t.minRange,t.minRange=e),t.selectedDates=[t.minRange,t.maxRange]):(t.selectedDates=[e],t.minRange=e):t.selectedDates=[e];t._setInputValue(),i.onSelect&&t._triggerOnChange(),i.autoClose&&!this.timepickerIsActive&&(i.multipleDates||i.range?i.range&&2==t.selectedDates.length&&t.hide():t.hide()),t.views[this.currentView]._render()}},removeDate:function(i){var s=this.selectedDates,n=this;if(i instanceof Date)return s.some(function(e,t){if(m.isSame(e,i))return s.splice(t,1),n.selectedDates.length?n.lastSelectedDate=n.selectedDates[n.selectedDates.length-1]:(n.minRange="",n.maxRange="",n.lastSelectedDate=""),n.views[n.currentView]._render(),n._setInputValue(),n.opts.onSelect&&n._triggerOnChange(),!0})},today:function(){this.silent=!0,this.view=this.opts.minView,this.silent=!1,this.date=new Date,this.opts.todayButton instanceof Date&&this.selectDate(this.opts.todayButton)},clear:function(){this.selectedDates=[],this.minRange="",this.maxRange="",this.views[this.currentView]._render(),this._setInputValue(),this.opts.onSelect&&this._triggerOnChange()},update:function(e,t){var i=arguments.length,s=this.lastSelectedDate;return 2==i?this.opts[e]=t:1==i&&"object"==_typeof(e)&&(this.opts=r.extend(!0,this.opts,e)),this._createShortCuts(),this._syncWithMinMaxDates(),this._defineLocale(this.opts.language),this.nav._addButtonsIfNeed(),this.opts.onlyTimepicker||this.nav._render(),this.views[this.currentView]._render(),this.elIsInput&&!this.opts.inline&&(this._setPositionClasses(this.opts.position),this.visible&&this.setPosition(this.opts.position)),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this.opts.onlyTimepicker&&this.$datepicker.addClass("-only-timepicker-"),this.opts.timepicker&&(s&&this.timepicker._handleDate(s),this.timepicker._updateRanges(),this.timepicker._updateCurrentTime(),s&&(s.setHours(this.timepicker.hours),s.setMinutes(this.timepicker.minutes))),this._setInputValue(),this},_syncWithMinMaxDates:function(){var e=this.date.getTime();this.silent=!0,this.minTime>e&&(this.date=this.minDate),this.maxTime<e&&(this.date=this.maxDate),this.silent=!1},_isSelected:function(t,i){var s=!1;return this.selectedDates.some(function(e){if(m.isSame(e,t,i))return s=e,!0}),s},_setInputValue:function(){var e,t=this,i=t.opts,s=t.loc.dateFormat,n=i.altFieldDateFormat,a=t.selectedDates.map(function(e){return t.formatDate(s,e)});i.altField&&t.$altField.length&&(e=(e=this.selectedDates.map(function(e){return t.formatDate(n,e)})).join(this.opts.multipleDatesSeparator),this.$altField.val(e)),a=a.join(this.opts.multipleDatesSeparator),this.$el.val(a)},_isInRange:function(e,t){var i=e.getTime(),s=m.getParsedDate(e),n=m.getParsedDate(this.minDate),a=m.getParsedDate(this.maxDate),r=new Date(s.year,s.month,n.date).getTime(),o=new Date(s.year,s.month,a.date).getTime(),l={day:i>=this.minTime&&i<=this.maxTime,month:r>=this.minTime&&o<=this.maxTime,year:s.year>=n.year&&s.year<=a.year};return t?l[t]:l.day},_getDimensions:function(e){var t=e.offset();return{width:e.outerWidth(),height:e.outerHeight(),left:t.left,top:t.top}},_getDateFromCell:function(e){var t=this.parsedDate,i=e.data("year")||t.year,s=e.data("month")==a?t.month:e.data("month"),n=e.data("date")||1;return new Date(i,s,n)},_setPositionClasses:function(e){var t=(e=e.split(" "))[0],i="datepicker -"+t+"-"+e[1]+"- -from-"+t+"-";this.visible&&(i+=" active"),this.$datepicker.removeAttr("class").addClass(i)},setPosition:function(e){e=e||this.opts.position;var t,i,s=this._getDimensions(this.$el),n=this._getDimensions(this.$datepicker),a=e.split(" "),r=this.opts.offset,o=a[0],l=a[1];switch(o){case"top":t=s.top-n.height-r;break;case"right":i=s.left+s.width+r;break;case"bottom":t=s.top+s.height+r;break;case"left":i=s.left-n.width-r}switch(l){case"top":t=s.top;break;case"right":i=s.left+s.width-n.width;break;case"bottom":t=s.top+s.height-n.height;break;case"left":i=s.left;break;case"center":/left|right/.test(o)?t=s.top+s.height/2-n.height/2:i=s.left+s.width/2-n.width/2}this.$datepicker.css({left:i,top:t})},show:function(){var e=this.opts.onShow;this.setPosition(this.opts.position),this.$datepicker.addClass("active"),this.visible=!0,e&&this._bindVisionEvents(e)},hide:function(){var e=this.opts.onHide;this.$datepicker.removeClass("active").css({left:"-100000px"}),this.focused="",this.keys=[],this.inFocus=!1,this.visible=!1,this.$el.blur(),e&&this._bindVisionEvents(e)},down:function(e){this._changeView(e,"down")},up:function(e){this._changeView(e,"up")},_bindVisionEvents:function(e){this.$datepicker.off("transitionend.dp"),e(this,!1),this.$datepicker.one("transitionend.dp",e.bind(this,this,!0))},_changeView:function(e,t){e=e||this.focused||this.date;var i="up"==t?this.viewIndex+1:this.viewIndex-1;2<i&&(i=2),i<0&&(i=0),this.silent=!0,this.date=new Date(e.getFullYear(),e.getMonth(),1),this.silent=!1,this.view=this.viewIndexes[i]},_handleHotKey:function(e){var t,i,s,n=m.getParsedDate(this._getFocusedDate()),a=this.opts,r=!1,o=!1,l=!1,c=n.year,d=n.month,h=n.date;switch(e){case"ctrlRight":case"ctrlUp":d+=1,r=!0;break;case"ctrlLeft":case"ctrlDown":d-=1,r=!0;break;case"shiftRight":case"shiftUp":o=!0,c+=1;break;case"shiftLeft":case"shiftDown":o=!0,c-=1;break;case"altRight":case"altUp":l=!0,c+=10;break;case"altLeft":case"altDown":l=!0,c-=10;break;case"ctrlShiftUp":this.up()}s=m.getDaysCount(new Date(c,d)),i=new Date(c,d,h),s<h&&(h=s),i.getTime()<this.minTime?i=this.minDate:i.getTime()>this.maxTime&&(i=this.maxDate),this.focused=i,t=m.getParsedDate(i),r&&a.onChangeMonth&&a.onChangeMonth(t.month,t.year),o&&a.onChangeYear&&a.onChangeYear(t.year),l&&a.onChangeDecade&&a.onChangeDecade(this.curDecade)},_registerKey:function(t){this.keys.some(function(e){return e==t})||this.keys.push(t)},_unRegisterKey:function(e){var t=this.keys.indexOf(e);this.keys.splice(t,1)},_isHotKeyPressed:function(){var e,t=!1,i=this.keys.sort();for(var s in l)e=l[s],i.length==e.length&&e.every(function(e,t){return e==i[t]})&&(this._trigger("hotKey",s),t=!0);return t},_trigger:function(e,t){this.$el.trigger(e,t)},_focusNextCell:function(e,t){t=t||this.cellType;var i=m.getParsedDate(this._getFocusedDate()),s=i.year,n=i.month,a=i.date;if(!this._isHotKeyPressed()){switch(e){case 37:"day"==t&&(a-=1),"month"==t&&(n-=1),"year"==t&&(s-=1);break;case 38:"day"==t&&(a-=7),"month"==t&&(n-=3),"year"==t&&(s-=4);break;case 39:"day"==t&&(a+=1),"month"==t&&(n+=1),"year"==t&&(s+=1);break;case 40:"day"==t&&(a+=7),"month"==t&&(n+=3),"year"==t&&(s+=4)}var r=new Date(s,n,a);r.getTime()<this.minTime?r=this.minDate:r.getTime()>this.maxTime&&(r=this.maxDate),this.focused=r}},_getFocusedDate:function(){var e=this.focused||this.selectedDates[this.selectedDates.length-1],t=this.parsedDate;if(!e)switch(this.view){case"days":e=new Date(t.year,t.month,(new Date).getDate());break;case"months":e=new Date(t.year,t.month,1);break;case"years":e=new Date(t.year,0,1)}return e},_getCell:function(e,t){t=t||this.cellType;var i,s=m.getParsedDate(e),n='.datepicker--cell[data-year="'+s.year+'"]';switch(t){case"month":n='[data-month="'+s.month+'"]';break;case"day":n+='[data-month="'+s.month+'"][data-date="'+s.date+'"]'}return(i=this.views[this.currentView].$el.find(n)).length?i:r("")},destroy:function(){var e=this;e.$el.off(".adp").data("datepicker",""),e.selectedDates=[],e.focused="",e.views={},e.keys=[],e.minRange="",e.maxRange="",e.opts.inline||!e.elIsInput?e.$datepicker.closest(".datepicker-inline").remove():e.$datepicker.remove()},_handleAlreadySelectedDates:function(e,t){this.opts.range?this.opts.toggleSelected?this.removeDate(t):2!=this.selectedDates.length&&this._trigger("clickCell",t):this.opts.toggleSelected&&this.removeDate(t),this.opts.toggleSelected||(this.lastSelectedDate=e,this.opts.timepicker&&(this.timepicker._setTime(e),this.timepicker.update()))},_onShowEvent:function(e){this.visible||this.show()},_onBlur:function(){!this.inFocus&&this.visible&&this.hide()},_onMouseDownDatepicker:function(e){this.inFocus=!0},_onMouseUpDatepicker:function(e){this.inFocus=!1,e.originalEvent.inFocus=!0,e.originalEvent.timepickerFocus||this.$el.focus()},_onKeyUpGeneral:function(e){this.$el.val()||this.clear()},_onResize:function(){this.visible&&this.setPosition()},_onMouseUpBody:function(e){e.originalEvent.inFocus||this.visible&&!this.inFocus&&this.hide()},_onMouseUpEl:function(e){e.originalEvent.inFocus=!0,setTimeout(this._onKeyUpGeneral.bind(this),4)},_onKeyDown:function(e){var t=e.which;if(this._registerKey(t),37<=t&&t<=40&&(e.preventDefault(),this._focusNextCell(t)),13==t&&this.focused){if(this._getCell(this.focused).hasClass("-disabled-"))return;if(this.view!=this.opts.minView)this.down();else{var i=this._isSelected(this.focused,this.cellType);if(!i)return this.timepicker&&(this.focused.setHours(this.timepicker.hours),this.focused.setMinutes(this.timepicker.minutes)),void this.selectDate(this.focused);this._handleAlreadySelectedDates(i,this.focused)}}27==t&&this.hide()},_onKeyUp:function(e){var t=e.which;this._unRegisterKey(t)},_onHotKey:function(e,t){this._handleHotKey(t)},_onMouseEnterCell:function(e){var t=r(e.target).closest(".datepicker--cell"),i=this._getDateFromCell(t);this.silent=!0,this.focused&&(this.focused=""),t.addClass("-focus-"),this.focused=i,this.silent=!1,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",m.less(this.minRange,this.focused)&&(this.maxRange=this.minRange,this.minRange=""),this.views[this.currentView]._update())},_onMouseLeaveCell:function(e){r(e.target).closest(".datepicker--cell").removeClass("-focus-"),this.silent=!0,this.focused="",this.silent=!1},_onTimeChange:function(e,t,i){var s=new Date,n=!1;this.selectedDates.length&&(n=!0,s=this.lastSelectedDate),s.setHours(t),s.setMinutes(i),n||this._getCell(s).hasClass("-disabled-")?(this._setInputValue(),this.opts.onSelect&&this._triggerOnChange()):this.selectDate(s)},_onClickCell:function(e,t){this.timepicker&&(t.setHours(this.timepicker.hours),t.setMinutes(this.timepicker.minutes)),this.selectDate(t)},set focused(e){if(!e&&this.focused){var t=this._getCell(this.focused);t.length&&t.removeClass("-focus-")}this._focused=e,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",m.less(this.minRange,this._focused)&&(this.maxRange=this.minRange,this.minRange="")),this.silent||(this.date=e)},get focused(){return this._focused},get parsedDate(){return m.getParsedDate(this.date)},set date(e){if(e instanceof Date)return this.currentDate=e,this.inited&&!this.silent&&(this.views[this.view]._render(),this.nav._render(),this.visible&&this.elIsInput&&this.setPosition()),e},get date(){return this.currentDate},set view(e){if(this.viewIndex=this.viewIndexes.indexOf(e),!(this.viewIndex<0))return this.prevView=this.currentView,this.currentView=e,this.inited&&(this.views[e]?this.views[e]._render():this.views[e]=new r.fn.datepicker.Body(this,e,this.opts),this.views[this.prevView].hide(),this.views[e].show(),this.nav._render(),this.opts.onChangeView&&this.opts.onChangeView(e),this.elIsInput&&this.visible&&this.setPosition()),e},get view(){return this.currentView},get cellType(){return this.view.substring(0,this.view.length-1)},get minTime(){var e=m.getParsedDate(this.minDate);return new Date(e.year,e.month,e.date).getTime()},get maxTime(){var e=m.getParsedDate(this.maxDate);return new Date(e.year,e.month,e.date).getTime()},get curDecade(){return m.getDecade(this.date)}},m.getDaysCount=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},m.getParsedDate=function(e){return{year:e.getFullYear(),month:e.getMonth(),fullMonth:e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,date:e.getDate(),fullDate:e.getDate()<10?"0"+e.getDate():e.getDate(),day:e.getDay(),hours:e.getHours(),fullHours:e.getHours()<10?"0"+e.getHours():e.getHours(),minutes:e.getMinutes(),fullMinutes:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes()}},m.getDecade=function(e){var t=10*Math.floor(e.getFullYear()/10);return[t,t+9]},m.template=function(e,i){return e.replace(/#\{([\w]+)\}/g,function(e,t){if(i[t]||0===i[t])return i[t]})},m.isSame=function(e,t,i){if(!e||!t)return!1;var s=m.getParsedDate(e),n=m.getParsedDate(t),a=i||"day";return{day:s.date==n.date&&s.month==n.month&&s.year==n.year,month:s.month==n.month&&s.year==n.year,year:s.year==n.year}[a]},m.less=function(e,t,i){return!(!e||!t)&&t.getTime()<e.getTime()},m.bigger=function(e,t,i){return!(!e||!t)&&t.getTime()>e.getTime()},m.getLeadingZeroNum=function(e){return parseInt(e)<10?"0"+e:e},m.resetTime=function(e){if("object"==_typeof(e))return e=m.getParsedDate(e),new Date(e.year,e.month,e.date)},r.fn.datepicker=function(t){return this.each(function(){if(r.data(this,n)){var e=r.data(this,n);e.opts=r.extend(!0,e.opts,t),e.update()}else r.data(this,n,new c(this,t))})},r.fn.datepicker.Constructor=c,r.fn.datepicker.language={ru:{days:["","","","","","",""],daysShort:["","","","","","",""],daysMin:["","","","","","",""],months:["","","","","","","","","","","",""],monthsShort:["","","","","","","","","","","",""],today:"",clear:"",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii",firstDay:1}},r(function(){r(".datepicker-here").datepicker()}),d={days:'<div class="datepicker--days datepicker--body"><div class="datepicker--days-names"></div><div class="datepicker--cells datepicker--cells-days"></div></div>',months:'<div class="datepicker--months datepicker--body"><div class="datepicker--cells datepicker--cells-months"></div></div>',years:'<div class="datepicker--years datepicker--body"><div class="datepicker--cells datepicker--cells-years"></div></div>'},h=r.fn.datepicker,u=h.Constructor,h.Body=function(e,t,i){this.d=e,this.type=t,this.opts=i,this.$el=r(""),this.opts.onlyTimepicker||this.init()},h.Body.prototype={init:function(){this._buildBaseHtml(),this._render(),this._bindEvents()},_bindEvents:function(){this.$el.on("click",".datepicker--cell",r.proxy(this._onClickCell,this))},_buildBaseHtml:function(){this.$el=r(d[this.type]).appendTo(this.d.$content),this.$names=r(".datepicker--days-names",this.$el),this.$cells=r(".datepicker--cells",this.$el)},_getDayNamesHtml:function(e,t,i,s){return i=i||"",7<(s=s!=a?s:0)?i:7==(t=t!=a?t:e)?this._getDayNamesHtml(e,0,i,++s):(i+='<div class="datepicker--day-name'+(this.d.isWeekend(t)?" -weekend-":"")+'">'+this.d.loc.daysMin[t]+"</div>",this._getDayNamesHtml(e,++t,i,++s))},_getCellContents:function(e,t){var i="datepicker--cell datepicker--cell-"+t,s=new Date,n=this.d,a=u.resetTime(n.minRange),r=u.resetTime(n.maxRange),o=n.opts,l=u.getParsedDate(e),c={},d=l.date;switch(t){case"day":n.isWeekend(l.day)&&(i+=" -weekend-"),l.month!=this.d.parsedDate.month&&(i+=" -other-month-",o.selectOtherMonths||(i+=" -disabled-"),o.showOtherMonths||(d=""));break;case"month":d=n.loc[n.opts.monthsField][l.month];break;case"year":var h=n.curDecade;d=l.year,(l.year<h[0]||l.year>h[1])&&(i+=" -other-decade-",o.selectOtherYears||(i+=" -disabled-"),o.showOtherYears||(d=""))}return o.onRenderCell&&(d=(c=o.onRenderCell(e,t)||{}).html?c.html:d,i+=c.classes?" "+c.classes:""),o.range&&(u.isSame(a,e,t)&&(i+=" -range-from-"),u.isSame(r,e,t)&&(i+=" -range-to-"),1==n.selectedDates.length&&n.focused?((u.bigger(a,e)&&u.less(n.focused,e)||u.less(r,e)&&u.bigger(n.focused,e))&&(i+=" -in-range-"),u.less(r,e)&&u.isSame(n.focused,e)&&(i+=" -range-from-"),u.bigger(a,e)&&u.isSame(n.focused,e)&&(i+=" -range-to-")):2==n.selectedDates.length&&u.bigger(a,e)&&u.less(r,e)&&(i+=" -in-range-")),u.isSame(s,e,t)&&(i+=" -current-"),n.focused&&u.isSame(e,n.focused,t)&&(i+=" -focus-"),n._isSelected(e,t)&&(i+=" -selected-"),n._isInRange(e,t)&&!c.disabled||(i+=" -disabled-"),{html:d,classes:i}},_getDaysHtml:function(e){for(var t,i,s=u.getDaysCount(e),n=new Date(e.getFullYear(),e.getMonth(),1).getDay(),a=new Date(e.getFullYear(),e.getMonth(),s).getDay(),r=n-this.d.loc.firstDay,o=6-a+this.d.loc.firstDay,l="",c=1-(r=r<0?r+7:r),d=s+(o=6<o?o-7:o);c<=d;c++)i=e.getFullYear(),t=e.getMonth(),l+=this._getDayHtml(new Date(i,t,c));return l},_getDayHtml:function(e){var t=this._getCellContents(e,"day");return'<div class="'+t.classes+'" data-date="'+e.getDate()+'" data-month="'+e.getMonth()+'" data-year="'+e.getFullYear()+'">'+t.html+"</div>"},_getMonthsHtml:function(e){for(var t="",i=u.getParsedDate(e),s=0;s<12;)t+=this._getMonthHtml(new Date(i.year,s)),s++;return t},_getMonthHtml:function(e){var t=this._getCellContents(e,"month");return'<div class="'+t.classes+'" data-month="'+e.getMonth()+'">'+t.html+"</div>"},_getYearsHtml:function(e){u.getParsedDate(e);for(var t=u.getDecade(e),i="",s=t[0]-1;s<=t[1]+1;s++)i+=this._getYearHtml(new Date(s,0));return i},_getYearHtml:function(e){var t=this._getCellContents(e,"year");return'<div class="'+t.classes+'" data-year="'+e.getFullYear()+'">'+t.html+"</div>"},_renderTypes:{days:function(){var e=this._getDayNamesHtml(this.d.loc.firstDay),t=this._getDaysHtml(this.d.currentDate);this.$cells.html(t),this.$names.html(e)},months:function(){var e=this._getMonthsHtml(this.d.currentDate);this.$cells.html(e)},years:function(){var e=this._getYearsHtml(this.d.currentDate);this.$cells.html(e)}},_render:function(){this.opts.onlyTimepicker||this._renderTypes[this.type].bind(this)()},_update:function(){var i,s,n,e=r(".datepicker--cell",this.$cells),a=this;e.each(function(e,t){s=r(this),n=a.d._getDateFromCell(r(this)),i=a._getCellContents(n,a.d.cellType),s.attr("class",i.classes)})},show:function(){this.opts.onlyTimepicker||(this.$el.addClass("active"),this.acitve=!0)},hide:function(){this.$el.removeClass("active"),this.active=!1},_handleClick:function(e){var t=e.data("date")||1,i=e.data("month")||0,s=e.data("year")||this.d.parsedDate.year,n=this.d;if(n.view==this.opts.minView){var a=new Date(s,i,t),r=this.d._isSelected(a,this.d.cellType);r?n._handleAlreadySelectedDates.bind(n,r,a)():n._trigger("clickCell",a)}else n.down(new Date(s,i,t))},_onClickCell:function(e){var t=r(e.target).closest(".datepicker--cell");t.hasClass("-disabled-")||this._handleClick.bind(this)(t)}},p=r.fn.datepicker,f=p.Constructor,p.Navigation=function(e,t){this.d=e,this.opts=t,this.$buttonsContainer="",this.init()},p.Navigation.prototype={init:function(){this._buildBaseHtml(),this._bindEvents()},_bindEvents:function(){this.d.$nav.on("click",".datepicker--nav-action",r.proxy(this._onClickNavButton,this)),this.d.$nav.on("click",".datepicker--nav-title",r.proxy(this._onClickNavTitle,this)),this.d.$datepicker.on("click",".datepicker--button",r.proxy(this._onClickNavButton,this))},_buildBaseHtml:function(){this.opts.onlyTimepicker||this._render(),this._addButtonsIfNeed()},_addButtonsIfNeed:function(){this.opts.todayButton&&this._addButton("today"),this.opts.clearButton&&this._addButton("clear")},_render:function(){var e=this._getTitle(this.d.currentDate),t=f.template('<div class="datepicker--nav-action" data-action="prev">#{prevHtml}</div><div class="datepicker--nav-title">#{title}</div><div class="datepicker--nav-action" data-action="next">#{nextHtml}</div>',r.extend({title:e},this.opts));this.d.$nav.html(t),"years"==this.d.view&&r(".datepicker--nav-title",this.d.$nav).addClass("-disabled-"),this.setNavStatus()},_getTitle:function(e){return this.d.formatDate(this.opts.navTitles[this.d.view],e)},_addButton:function(e){this.$buttonsContainer.length||this._addButtonsContainer();var t={action:e,label:this.d.loc[e]},i=f.template('<span class="datepicker--button" data-action="#{action}">#{label}</span>',t);r("[data-action="+e+"]",this.$buttonsContainer).length||this.$buttonsContainer.append(i)},_addButtonsContainer:function(){this.d.$datepicker.append('<div class="datepicker--buttons"></div>'),this.$buttonsContainer=r(".datepicker--buttons",this.d.$datepicker)},setNavStatus:function(){if((this.opts.minDate||this.opts.maxDate)&&this.opts.disableNavWhenOutOfRange){var e=this.d.parsedDate,t=e.month,i=e.year,s=e.date;switch(this.d.view){case"days":this.d._isInRange(new Date(i,t-1,1),"month")||this._disableNav("prev"),this.d._isInRange(new Date(i,t+1,1),"month")||this._disableNav("next");break;case"months":this.d._isInRange(new Date(i-1,t,s),"year")||this._disableNav("prev"),this.d._isInRange(new Date(i+1,t,s),"year")||this._disableNav("next");break;case"years":var n=f.getDecade(this.d.date);this.d._isInRange(new Date(n[0]-1,0,1),"year")||this._disableNav("prev"),this.d._isInRange(new Date(n[1]+1,0,1),"year")||this._disableNav("next")}}},_disableNav:function(e){r('[data-action="'+e+'"]',this.d.$nav).addClass("-disabled-")},_activateNav:function(e){r('[data-action="'+e+'"]',this.d.$nav).removeClass("-disabled-")},_onClickNavButton:function(e){var t=r(e.target).closest("[data-action]").data("action");this.d[t]()},_onClickNavTitle:function(e){if(!r(e.target).hasClass("-disabled-"))return"days"==this.d.view?this.d.view="months":void(this.d.view="years")}},g=r.fn.datepicker,y=g.Constructor,g.Timepicker=function(e,t){this.d=e,this.opts=t,this.init()},g.Timepicker.prototype={init:function(){var e="input";this._setTime(this.d.date),this._buildHTML(),navigator.userAgent.match(/trident/gi)&&(e="change"),this.d.$el.on("selectDate",this._onSelectDate.bind(this)),this.$ranges.on(e,this._onChangeRange.bind(this)),this.$ranges.on("mouseup",this._onMouseUpRange.bind(this)),this.$ranges.on("mousemove focus ",this._onMouseEnterRange.bind(this)),this.$ranges.on("mouseout blur",this._onMouseOutRange.bind(this))},_setTime:function(e){var t=y.getParsedDate(e);this._handleDate(e),this.hours=t.hours<this.minHours?this.minHours:t.hours,this.minutes=t.minutes<this.minMinutes?this.minMinutes:t.minutes},_setMinTimeFromDate:function(e){this.minHours=e.getHours(),this.minMinutes=e.getMinutes(),this.d.lastSelectedDate&&this.d.lastSelectedDate.getHours()>e.getHours()&&(this.minMinutes=this.opts.minMinutes)},_setMaxTimeFromDate:function(e){this.maxHours=e.getHours(),this.maxMinutes=e.getMinutes(),this.d.lastSelectedDate&&this.d.lastSelectedDate.getHours()<e.getHours()&&(this.maxMinutes=this.opts.maxMinutes)},_setDefaultMinMaxTime:function(){var e=this.opts;this.minHours=e.minHours<0||23<e.minHours?0:e.minHours,this.minMinutes=e.minMinutes<0||59<e.minMinutes?0:e.minMinutes,this.maxHours=e.maxHours<0||23<e.maxHours?23:e.maxHours,this.maxMinutes=e.maxMinutes<0||59<e.maxMinutes?59:e.maxMinutes},_validateHoursMinutes:function(e){this.hours<this.minHours?this.hours=this.minHours:this.hours>this.maxHours&&(this.hours=this.maxHours),this.minutes<this.minMinutes?this.minutes=this.minMinutes:this.minutes>this.maxMinutes&&(this.minutes=this.maxMinutes)},_buildHTML:function(){var e=y.getLeadingZeroNum,t={hourMin:this.minHours,hourMax:e(this.maxHours),hourStep:this.opts.hoursStep,hourValue:this.hours,hourVisible:e(this.displayHours),minMin:this.minMinutes,minMax:e(this.maxMinutes),minStep:this.opts.minutesStep,minValue:e(this.minutes)},i=y.template('<div class="datepicker--time"><div class="datepicker--time-current">   <span class="datepicker--time-current-hours">#{hourVisible}</span>   <span class="datepicker--time-current-colon">:</span>   <span class="datepicker--time-current-minutes">#{minValue}</span></div><div class="datepicker--time-sliders">   <div class="datepicker--time-row">      <input type="range" name="hours" value="#{hourValue}" min="#{hourMin}" max="#{hourMax}" step="#{hourStep}"/>   </div>   <div class="datepicker--time-row">      <input type="range" name="minutes" value="#{minValue}" min="#{minMin}" max="#{minMax}" step="#{minStep}"/>   </div></div></div>',t);this.$timepicker=r(i).appendTo(this.d.$datepicker),this.$ranges=r('[type="range"]',this.$timepicker),this.$hours=r('[name="hours"]',this.$timepicker),this.$minutes=r('[name="minutes"]',this.$timepicker),this.$hoursText=r(".datepicker--time-current-hours",this.$timepicker),this.$minutesText=r(".datepicker--time-current-minutes",this.$timepicker),this.d.ampm&&(this.$ampm=r('<span class="datepicker--time-current-ampm">').appendTo(r(".datepicker--time-current",this.$timepicker)).html(this.dayPeriod),this.$timepicker.addClass("-am-pm-"))},_updateCurrentTime:function(){var e=y.getLeadingZeroNum(this.displayHours),t=y.getLeadingZeroNum(this.minutes);this.$hoursText.html(e),this.$minutesText.html(t),this.d.ampm&&this.$ampm.html(this.dayPeriod)},_updateRanges:function(){this.$hours.attr({min:this.minHours,max:this.maxHours}).val(this.hours),this.$minutes.attr({min:this.minMinutes,max:this.maxMinutes}).val(this.minutes)},_handleDate:function(e){this._setDefaultMinMaxTime(),e&&(y.isSame(e,this.d.opts.minDate)?this._setMinTimeFromDate(this.d.opts.minDate):y.isSame(e,this.d.opts.maxDate)&&this._setMaxTimeFromDate(this.d.opts.maxDate)),this._validateHoursMinutes(e)},update:function(){this._updateRanges(),this._updateCurrentTime()},_getValidHoursFromDate:function(e,t){var i=e;e instanceof Date&&(i=y.getParsedDate(e).hours);var s="am";if(t||this.d.ampm)switch(!0){case 0==i:i=12;break;case 12==i:s="pm";break;case 11<i:i-=12,s="pm"}return{hours:i,dayPeriod:s}},set hours(e){this._hours=e;var t=this._getValidHoursFromDate(e);this.displayHours=t.hours,this.dayPeriod=t.dayPeriod},get hours(){return this._hours},_onChangeRange:function(e){var t=r(e.target),i=t.attr("name");this.d.timepickerIsActive=!0,this[i]=t.val(),this._updateCurrentTime(),this.d._trigger("timeChange",[this.hours,this.minutes]),this._handleDate(this.d.lastSelectedDate),this.update()},_onSelectDate:function(e,t){this._handleDate(t),this.update()},_onMouseEnterRange:function(e){var t=r(e.target).attr("name");r(".datepicker--time-current-"+t,this.$timepicker).addClass("-focus-")},_onMouseOutRange:function(e){var t=r(e.target).attr("name");this.d.inFocus||r(".datepicker--time-current-"+t,this.$timepicker).removeClass("-focus-")},_onMouseUpRange:function(e){this.d.timepickerIsActive=!1}}}(window,jQuery);
//# sourceMappingURL=maps/libs.min.js.map
